{% from "./macros/_form.html" import form %}
{% macro auth_handlers() %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/macros/_auth.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='js/dismissHandler.js') }}"></script>
{% endmacro %}
{% macro login() %}
{{auth_handlers()}}
<div id="login-area" class="overlay auth-overlay flex-col flex-center" style="display:none;">
    <div id="login-content-container" class="flex-col flex-center">
        <div id="login-popup" class="auth-container flex-col flex-center r2">
            <h1 class="auth-content title-large auth-main">Log in to<br>the Chronicle</h1>
            <button class="auth-content google-auth"><i class="auth-icon fab fa-google"></i>Continue with
                Google</button>
            <form action="/register" method="POST" class="form-container flex-col">
                {{ form('E-Mail',       'auth-item ' ,    'email-form',       'email',        'name-login-email') }}
                {{ form('Password',     'auth-item ' ,    'password-form',    'password',     'name-login-password') }}
                <div class="auth-lower-container flex-row flex-between">
                    <a href="/profile/reset" class="forgot sub">Forgot<br>Password?</a>
                    <button type="submit" class="r2 submit-button">Log in</button>
                    <!--
                    TODO: submit button triggers js and verification code popup appears. (Button should not be enabled if password is invalid.)
                    -->
                </div>
            </form>
        </div>
        <a href="/register" id="register-link-popup" class="sub-auth-redirect-popup auth-container">
            <p class="register-redirector sub">
                Don't have an account? <span class="register-link">Register</span>
            </p>
        </a>
    </div>
</div>
{% endmacro %}
{% macro register() %}
{{auth_handlers()}}
<div id="register-area" class="overlay auth-overlay flex-col flex-center" style="display:none">
    <div id="register-content-container" class="flex-col flex-center">
        <div id="register-popup" class="auth-container register-popup flex-col r2">
            <h1 class="title-large register-title auth-main">Register.</h1>
            <p class="sub register-sub auth-sub">Join the community.</p>
            <form action="/register" method="POST" class="input-field-container">
                <div class="flex-row">
                    {{form("Name",              "auth-item personal-info register-form",      "register-field register-display-name-field",      "text",         "name-register-displayname")}}
                    {{form("E-mail",            "auth-item personal-info register-form",      "register-field register-email-field",             "email",        "name-register-email")}}
                </div>
                <div class="flex-row register-bottom-area">
                    <div class="pass-container">
                        {{form("Password",          "auth-item register-form",                    "register-field register-password-field",          "password",     "name-register-password")}}
                    </div>
                    <div class="submit-container flex-col">
                        <p class="sub register-sub terms-sub">By clicking register, you agree to the <a
                                href="/legal/terms-and-conditions" class="terms">terms and conditions.</a></p>
                        <button type="submit" class="r2 submit-button">Register</button>
                    </div>
                </div>

            </form>
        </div>
        <a href="/login" id="login-link-popup" class="sub-auth-redirect-popup auth-container">
            <p class="register-redirector sub">
                Already have an account? <span class="register-link">Log in</span>
            </p>
        </a>
    </div>
</div>
{% endmacro %}