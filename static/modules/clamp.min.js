window.$clamp=function(e,t){function n(e,t){return s.getComputedStyle||(s.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(e,t,n){return n.toUpperCase()})),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),s.getComputedStyle(e,null).getPropertyValue(t)}function i(t){t=t||e.clientHeight;var n=a(e);return Math.max(Math.floor(t/n),0)}function l(t){return a(e)*t}function a(e){var t=n(e,"line-height");return"normal"==t&&(t=1.2*parseInt(n(e,"font-size"))),parseInt(t)}function r(t){return t.lastChild.children&&0<t.lastChild.children.length?r(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!=t.lastChild.nodeValue&&t.lastChild.nodeValue!=h.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),r(e))}function o(t,n){if(n){var i=t.nodeValue.replace(h.truncationChar,"");if(g||(L=0<H.length?H.shift():"",g=i.split(L)),1<g.length?(v=g.pop(),u(t,g.join(L))):g=null,c&&(t.nodeValue=t.nodeValue.replace(h.truncationChar,""),e.innerHTML=t.nodeValue+" "+c.innerHTML+h.truncationChar),g){if(e.clientHeight<=n){if(!(0<=H.length&&""!=L))return e.innerHTML;u(t,g.join(L)+L+v),g=null}}else""==L&&(u(t,""),t=r(e),H=h.splitOnChars.slice(0),L=H[0],v=g=null);if(!h.animate)return o(t,n);setTimeout(function(){o(t,n)},!0===h.animate?10:h.animate)}}function u(e,t){e.nodeValue=t+h.truncationChar}t=t||{};var c,s=window,h={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},p=e.style,d=e.innerHTML,C=void 0!==e.style.webkitLineClamp,m=h.clamp,f=m.indexOf&&(-1<m.indexOf("px")||-1<m.indexOf("em"));h.truncationHTML&&(c=document.createElement("span"),c.innerHTML=h.truncationHTML);var g,v,y,H=h.splitOnChars.slice(0),L=H[0];return"auto"==m?m=i():f&&(m=i(parseInt(m))),C&&h.useNativeClamp?(p.overflow="hidden",p.textOverflow="ellipsis",p.webkitBoxOrient="vertical",p.display="-webkit-box",p.webkitLineClamp=m,f&&(p.height=h.clamp+"px")):(p=l(m),p<=e.clientHeight&&(y=o(r(e),p))),{original:d,clamped:y}};